# Universal Duel Interfaceについて

**Universal Duel Interface**(**UDI**)は、デュエルに関する情報をクライアントとAIエージェント間でやり取りするためのインターフェースです。

UDIを使ったデュエルには、デュエルを進行させる**クライアント**と、デュエルをするプレイヤーとなる**AIエージェント**の二つが必要です。

## クライアント
クライアントは基本的にデュエルが開始した後は自動でデュエルを進行させ、プレイヤーの入力が必要になるタイミングではAIエージェントに**入力要求**を送信します。

クライアントはAIエージェントからその入力要求に対する**コマンド**を受信し、その返答に応じてデュエルを進行させます。

### クライアントの種類
デュエルを進行させるクライアントとして以下の二つが用意されています。

- **MDクライアント**
  - マスターデュエル（MD）にUDIの対応を入れた特別なクライアントです。GUIでの確認やリモートでのPvP、実際の本戦などで使用します。
- **DuelSimulator**
  - コンソール上で高速にデュエルを行うためのクライアントです。学習にはこちらを使用します。

### クライアントが情報を送信するタイミング
クライアントが情報を送信するタイミングは下記の通りです。
デュエルを進めるための入力要求以外にも特定のタイミングで情報を送信します。

 - 入力要求
 - デュエル開始時
 - デュエル終了時
 - カードが移動したとき
 - カードの表示形式が変わったとき
 - 戦闘が初期化されたとき
 - 攻撃宣言がされたとき
 - LPが変動したとき
 - フェイズが変更されたとき
 - モンスターが召喚されたとき
 - モンスターが特殊召喚されたとき
 - カードの効果が発動・適用されたとき
 - カードの効果がチェーンに積まれたとき
 - チェーンブロックが処理されるとき
 - チェーンブロックの処理が終了したとき

### クライアントが送信する情報
クライアントがAIエージェントに送信するデュエルの情報を`DuelData`（`duel_data`）と呼びます。

デュエルの進行にプレイヤーの選択が必要になった場合は、入力要求の情報も`DuelData`に入れて送信します。

`DuelData`の詳しい中身については`duel_data_sample.ipynb`などを参照してください。

## AIエージェント
AIエージェントはクライアントと通信しデュエルの情報（`DuelData`）を受け取ります。

クライアントから入力要求があった場合は、それに返答してデュエルを進行させます。

デュエルAIを作成するには、このAIエージェントを実装するということになります。
