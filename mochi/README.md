# 面接ロールプレイ実行システム（最小限版）

## 概要

LLM同士が面接のやりとりを行い、3人の候補者の中で面接ロールプレイを実行する最小限のシステムです。
WebGUIを排除し、必要最小限の機能のみを実装しています。

## 特徴

- **シンプルな構成**: WebGUIなし、CLIベースで実行
- **3者間ロールプレイ**: 面接官1名 + 応募者3名でシミュレーション
- **API使用**: OpenAI APIを使用（ローカルモデル非対応）
- **最小限の依存**: 必要なライブラリを最小化

## ファイル構成

```
mochi/
├── config.py          # 設定ファイル（APIキー、モデル名など）
├── utils.py           # ユーティリティ関数（API呼び出し）
├── interviewer.py     # 面接官役のクラス
├── student.py         # 応募者役のクラス
├── main.py            # メイン実行スクリプト
├── results/           # 結果保存ディレクトリ（自動生成）
└── README.md          # このファイル
```

## セットアップ

1. **依存ライブラリのインストール**
   ```bash
   pip install openai
   ```

2. **APIキーの設定**
   
   方法1: 環境変数で設定（推奨）
   ```bash
   export OPENAI_API_KEY="your-api-key-here"
   ```
   
   方法2: config.pyを直接編集
   ```python
   OPENAI_API_KEY = "your-api-key-here"
   ```
   
   ※ セキュリティのため、環境変数での設定を推奨します

## 使い方

### 基本的な実行

```bash
cd mochi
python main.py
```

### 動作の流れ

1. `experiment_inter/db.json`からランダムに企業情報と候補者情報を読み込む
2. 3名の候補者をそれぞれ異なる準備レベル（high/medium/low）で初期化
3. 面接官が質問を生成し、各候補者が回答
4. これを指定ラウンド数（デフォルト5回）繰り返す
5. 最終評価として、最も志望度が低い候補者を選定し、ランキングを作成
6. 結果を`results/`ディレクトリにJSON形式で保存

### 設定のカスタマイズ

`config.py`で以下の設定を変更できます：

- `NUM_CANDIDATES`: 候補者数（デフォルト: 3）
- `MAX_ROUNDS`: 面接ラウンド数（デフォルト: 5）
- `INTERVIEWER_MODEL`: 面接官のモデル名（デフォルト: "gpt-4o-mini"）
- `APPLICANT_MODEL`: 応募者のモデル名（デフォルト: "gpt-4o-mini"）

## 出力例

実行すると以下のような出力が得られます：

```
============================================================
面接ロールプレイ実行システム（最小限版）
============================================================

=== セット 1 を選択 ===
企業: サンプル株式会社
学生数: 3人

候補者: 山田太郎 (準備レベル: high, 知識カバレッジ: 10/10 (100%))
候補者: 佐藤花子 (準備レベル: medium, 知識カバレッジ: 7/10 (70%))
候補者: 鈴木次郎 (準備レベル: low, 知識カバレッジ: 4/10 (40%))

============================================================
面接開始（5ラウンド）
============================================================

--- ラウンド 1 ---
面接官の質問: 当社のビジョンについてどのように理解していますか？

山田太郎: 御社のビジョンは...（回答）
佐藤花子: 御社のビジョンについては...（回答）
鈴木次郎: 御社のビジョンに関して...（回答）

...（以降のラウンド）

============================================================
最終評価
============================================================

【最も志望度が低い候補者の選定】
最も志望度が低いのは鈴木次郎さんです。理由：...

【志望度ランキング（低い順）】
1位: 鈴木次郎
2位: 佐藤花子
3位: 山田太郎

============================================================
結果を保存しました: results/interview_result_20250122_120000.json
============================================================
```

## 元のプログラムとの違い

元の`experiment_inter/app.py`との主な違い：

- **WebGUI削除**: Flask、テンプレート、静的ファイルなし
- **ローカルモデル非対応**: APIのみ使用
- **スプレッドシート連携削除**: 結果はJSON形式でローカル保存のみ
- **複数回シミュレーション削除**: 1回のみ実行
- **統計分析削除**: 基本的な評価のみ
- **人間面接官モード削除**: LLM同士のみ
- **動的フロー削除**: 固定ラウンド数のみ

## トラブルシューティング

### `db.json`が見つからない

`mochi/`ディレクトリは`experiment_inter/`と同じ階層にある必要があります。
プロジェクト構造：
```
penguin-paper/
├── experiment_inter/
│   └── db.json
└── mochi/
    └── main.py
```

### API呼び出しエラー

- APIキーが正しく設定されているか確認
- インターネット接続を確認
- OpenAIの利用可能残高を確認

## ライセンス

元のプログラムと同じライセンスに従います。
